<html><head><meta charset="utf-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><title>Why Finagle x Http4s?</title><link rel="shortcut icon" type="image/x-icon" href="../favicon.ico"></link><script type="text/javascript" src="../scripts/clipboard.js" defer="true"></script><script type="text/javascript" src="../scripts/platform-content-handler.js" defer="true"></script><script type="text/javascript" src="../scripts/main.js" defer="true"></script><link rel="stylesheet" href="../styles/nord-light.css"></link><link rel="stylesheet" href="../styles/scalastyle.css"></link><link rel="stylesheet" href="../styles/dotty-icons.css"></link><link rel="stylesheet" href="../styles/diagram.css"></link><link rel="stylesheet" href="../styles/filter-bar.css"></link><link rel="stylesheet" href="../styles/search-bar.css"></link><script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js" defer="true"></script><script type="text/javascript" src="https://d3js.org/d3.v6.min.js" defer="true"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/graphlib-dot@0.6.2/dist/graphlib-dot.min.js" defer="true"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dagre-d3/0.6.1/dagre-d3.min.js" defer="true"></script><link rel="stylesheet" href="../styles/filter-bar.css"></link><script type="text/javascript" src="../hljs/highlight.pack.js" defer="true"></script><script type="text/javascript" src="../scripts/hljs-scala3.js" defer="true"></script><script type="text/javascript" src="../scripts/ux.js" defer="true"></script><script type="text/javascript" src="../scripts/common/component.js" defer="true"></script><script type="text/javascript" src="../scripts/common/utils.js" defer="true"></script><script type="text/javascript" src="../scripts/components/FilterBar.js" defer="true"></script><script type="text/javascript" src="../scripts/components/DocumentableList.js" defer="true"></script><script type="text/javascript" src="../scripts/components/Input.js" defer="true"></script><script type="text/javascript" src="../scripts/components/FilterGroup.js" defer="true"></script><script type="text/javascript" src="../scripts/components/Filter.js" defer="true"></script><script type="text/javascript" src="../scripts/data.js" defer="true"></script><script>var pathToRoot = "../";</script></head><body><div id="container"><div id="leftColumn"><div id="logo"><span><div class="projectName">Http4s Finagle</div></span><span><div class="projectVersion">0.21.21-21.2.0</div></span></div><div id="paneSearch"></div><nav id="sideMenu2"><div class="expanded"><a href="#">Http4s Finagle</a><span></span><div><a href="install.html">Installation</a></div><div><a href="quick-start.html">Quick Started</a></div><div><a href="" class="selected expanded">Why Finagle x Http4s?</a></div><div><a href="example.html">A Production Ready Example</a></div><div><a href="../api/index.html">API</a><span></span><div><a href="../api/org/http4s.html">org.http4s</a></div><div><a href="../api/org/http4s/finagle.html">org.http4s.finagle</a></div></div></div></nav></div><div id="main"><div id="leftToggler"><span class="icon-toggler"></span></div><div id="searchBar"></div><main>
  <div id="content" pageIds="docs.finagle.md////PointingToDeclaration//-2133123418">
    <div class="breadcrumbs"><a href="index.html">Http4s Finagle</a>/<a href="">Why Finagle x Http4s?</a></div>
<!-- This page was last generated on  --><!doctype html>
<html lang="en"> 
 <head> 
  <meta charset="utf-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> 
  <meta http-equiv="x-ua-compatible" content="ie=edge"> 
  <title>Why Finagle x Http4s?</title> 
  <link rel="icon" type="image/png" href="/images/favicon.png"> 
  <link rel="dns-prefetch" href="//fonts.googleapis.com"> 
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin> 
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css"> 
 </head> 
 <body> 
  <main class="container"> 
   <header> 
    <h1>Why Finagle x Http4s?</h1> 
   </header> 
   <p>Finagle is an extensible RPC system that Twitter running on, there are bunch of production ready things to use, without needing particular setup, batteries included such as:</p> 
   <h2><a href="#zipkin-distributed-tracing" id="zipkin-distributed-tracing" class="anchor"></a>Zipkin distributed tracing</h2> 
   <p>So if all your microservices are running on Finagle, it is pretty much 0 config to get Zipkin just works. <img src="https://zipkin.io/public/img/web-screenshot.png" alt=""> you can query a request's journey through all your microservices by just query it's trace id, interesting data will be summarized for you, such as the percentage of time spent in which service, and whether or not operations failed.</p> 
   <h2><a href="#metrics" id="metrics" class="anchor"></a>Metrics</h2> 
   <p>Finagle will automatically generate <a href="https://twitter.github.io/finagle/guide/Metrics.html">metrics</a> for server and client when you enable them with</p> 
   <pre><code class="language-scala">.withHttpStats
</code></pre> 
   <p>There are some adapter ready to use to expose to different format, such as <a href="https://samstarling.co.uk/projects/finagle-prometheus/">Prometheus</a></p> 
   <h2><a href="#circuit-breaker-x-load-balancer-x-retry" id="circuit-breaker-x-load-balancer-x-retry" class="anchor"></a>Circuit Breaker x Load Balancer x Retry</h2> 
   <ul> 
    <li><a href="https://twitter.github.io/finagle/guide/Clients.html#circuit-breaking">Circuit Breaker</a></li> 
    <li><a href="https://twitter.github.io/finagle/guide/ApertureLoadBalancers.html">Load Balancer</a></li> 
    <li><a href="https://twitter.github.io/finagle/guide/Clients.html#retries">Retry</a></li> 
   </ul> 
   <p>Since Finagle is RPC system, it is very easy to detect error accurately, you can also apply <a href="https://twitter.github.io/finagle/guide/Clients.html#custom-classifiers">custom classifier</a> to identity different kinds of error</p> 
   <h2><a href="#twitter-server" id="twitter-server" class="anchor"></a>Twitter Server</h2> 
   <p>If we run Finagle Service on a <a href="https://twitter.github.io/twitter-server/">Twitter Server</a>, then we will get</p> 
   <ul> 
    <li>Logging with dynamo log level control</li> 
    <li>flag and feature toggle</li> 
    <li>a Admin portal that can monitor metrics and histograms</li> 
   </ul> 
   <h2><a href="#finagle-x-http4s" id="finagle-x-http4s" class="anchor"></a>Finagle x Http4s</h2> 
   <p>The pain point is when there are lot of existing Finagle RPC services running on production already, and when I introduced Http4s service, I need to spend too many time to make Zipkin, metrics, circuit breaker work the same way with the existing services, but if I give up new service will be couple with Finagle/Finatra dsl forever.</p> 
   <p>Now with http4s-finagle, we can actually take advantage of both, create business with Http4s, and run them on Finagle to keep Devops practice consistent.</p> 
  </main>  
 </body>
</html>  </div>
</main><footer><span class="go-to-top-icon"><a href="#container"><span class="icon-vertical_align_top"></span>&nbsp;Back to top</a></span>Generated by&nbsp;<a href="https://github.com/lampepfl/dotty/tree/master/scala3doc"><img src="../images/scala3doc_logo.svg" alt="Scala3doc" class="scala3doc_logo"></img></a></footer></div></div><script type="text/javascript" src="../scripts/pages.js"></script><script type="text/javascript" src="../scripts/main.js"></script></body></html>
